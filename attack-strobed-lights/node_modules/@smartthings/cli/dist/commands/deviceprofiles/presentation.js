"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const errors_1 = require("@oclif/errors");
const cli_lib_1 = require("@smartthings/cli-lib");
const presentation_1 = require("../presentation");
const deviceprofiles_1 = require("../deviceprofiles");
class DeviceProfilePresentationCommand extends cli_lib_1.APICommand {
    async run() {
        const { args, argv, flags } = this.parse(DeviceProfilePresentationCommand);
        await super.setup(args, argv, flags);
        const id = await deviceprofiles_1.chooseDeviceProfile(this, args.id, { allowIndex: true });
        const profile = await this.client.deviceProfiles.get(id);
        if (!profile.metadata) {
            throw new errors_1.CLIError('No presentation defined for device profile');
        }
        const presentation = await this.client.presentation.getPresentation(profile.metadata.vid, profile.metadata.mnmn);
        await cli_lib_1.formatAndWriteItem(this, { buildTableOutput: data => presentation_1.buildTableOutput(this.tableGenerator, data) }, presentation);
    }
}
exports.default = DeviceProfilePresentationCommand;
DeviceProfilePresentationCommand.description = 'get the presentation associated with a device profile';
DeviceProfilePresentationCommand.flags = {
    ...cli_lib_1.APICommand.flags,
    ...cli_lib_1.formatAndWriteItem.flags,
};
DeviceProfilePresentationCommand.args = [{
        name: 'id',
        description: 'device profile UUID or the number of the profile from list',
    }];
DeviceProfilePresentationCommand.examples = [
    '$ smartthings deviceprofiles:presentation fd4adb7f-4a23-4134-9b39-05ed889a03cf',
    '$ smartthings deviceprofiles:presentation fd4adb7f-4a23-4134-9b39-05ed889a03cf --language=ko',
    '$ smartthings deviceprofiles:presentation fd4adb7f-4a23-4134-9b39-05ed889a03cf --language=NONE',
    '',
    'Specifying only the presentationId defaults to the "SmartThingsCommunity" manufacturer',
    'name and the language set for the computer\'s operating system. The language can be',
    'overridden by specifying an ISO language code. If "NONE" is specified for the language',
    'flag then no language header is specified in the API request',
];
DeviceProfilePresentationCommand.aliases = ['device-profiles:presentation'];
