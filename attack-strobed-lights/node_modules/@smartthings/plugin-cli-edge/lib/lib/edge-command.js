"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EdgeCommand = void 0;
const core_sdk_1 = require("@smartthings/core-sdk");
const cli_lib_1 = require("@smartthings/cli-lib");
const edge_client_1 = require("./edge-client");
class EdgeCommand extends cli_lib_1.APICommand {
    get edgeClient() {
        if (this._edgeClient) {
            return this._edgeClient;
        }
        throw new Error('EdgeCommand not initialized properly');
    }
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    async setup(args, argv, flags) {
        await super.setup(args, argv, flags);
        const authenticator = this.token
            ? new core_sdk_1.BearerTokenAuthenticator(this.token)
            : new cli_lib_1.LoginAuthenticator(this.profileName, this.clientIdProvider);
        const logger = cli_lib_1.logManager.getLogger('rest-client');
        this._edgeClient = new edge_client_1.EdgeClient(authenticator, { urlProvider: this.clientIdProvider, logger });
    }
}
exports.EdgeCommand = EdgeCommand;
EdgeCommand.flags = cli_lib_1.APICommand.flags;
